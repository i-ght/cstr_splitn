splitn from rust, written in C
